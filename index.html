<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TOLD Viewer</title>
<style>
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: #111;
    color: #fff;
    overflow: hidden;
  }
  .screen {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s ease, visibility 0.5s ease;
  }
  .active {
    opacity: 1;
    visibility: visible;
  }

  /* Load screen */
  #loadScreen {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
  }
  textarea, button {
    margin: 10px;
    padding: 12px;
    border-radius: 8px;
    font-size: 1rem;
  }
  textarea { width: 80%; height: 120px; }
  button { background:#28a745; color:white; border:none; cursor:pointer; }

  /* Results screen */
  #resultsScreen { padding: 10px; }

  .header {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    margin-bottom: 20px;
  }
  .header-left { text-align: left; font-size: 0.9rem; color:#bbb; }
  .header-center {
    text-align: center;
    font-size: 2rem;
    font-weight: bold;
    border: 3px solid #fff;
    border-radius: 10px;
    padding: 5px 20px;
  }
  .header-right { text-align: right; font-size: 0.9rem; color:#bbb; }

  #cardContent {
    padding: 10px;
    background: rgba(255,255,255,0.08);
    border-radius: 10px;
    font-family: monospace;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  #backBtn {
    display: block;
    margin: 20px auto;
    padding: 10px 20px;
    background: #444;
    border: none;
    border-radius: 8px;
    color: #fff;
    font-size: 1rem;
  }
</style>
</head>
<body>

<!-- Load Screen -->
<div id="loadScreen" class="screen active">
  <h2>Load TOLD Card</h2>
  <textarea id="jsonInput" placeholder="Paste JSON here..."></textarea>
  <button onclick="loadCard()">Load Card</button>
  <button onclick="demoCard()">Demo Card</button>
</div>

<!-- Results Screen -->
<div id="resultsScreen" class="screen">
  <div class="header">
    <div class="header-left" id="date"></div>
    <div class="header-center" id="callsign"></div>
    <div class="header-right" id="depTime"></div>
  </div>
  <div id="cardContent"></div>
  <button id="backBtn" onclick="goBack()">⬅ Back</button>
</div>

<script>
function switchScreen(show) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById(show).classList.add("active");
}

function renderCard(card) {
  // Header
  document.getElementById("callsign").textContent = card.callsign || "UNKNOWN";
  document.getElementById("date").textContent = new Date().toLocaleDateString();
  document.getElementById("depTime").textContent = card.ts || "--:--";

  // Content (for now: raw JSON pretty-printed)
  document.getElementById("cardContent").innerHTML =
    "<pre>" + JSON.stringify(card, null, 2) + "</pre>";

  switchScreen("resultsScreen");
}

function loadCard() {
  try {
    const input = document.getElementById("jsonInput").value;
    const card = JSON.parse(input);
    renderCard(card);
  } catch (e) {
    alert("Invalid JSON");
  }
}

function demoCard() {
  const demo = {
    callsign: "DAL136",
    departure: "KDTW",
    arrival: "KMSP",
    ts: "2025-09-28 21:10Z"
  };
  renderCard(demo);
}

function goBack() {
  switchScreen("loadScreen");
}
</script>

  <footer style='text-align:center;font-size:0.7rem;color:#888;margin:20px;'>Build v2 – 2025-09-28 23:46:23</footer>
</body>
</html>
