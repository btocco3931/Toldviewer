<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TOLD Viewer</title>
  <style>
    body { margin:0; font-family:system-ui,sans-serif; background:#111; color:#fff; }
    .screen { position:absolute; inset:0; display:none; align-items:center; justify-content:center; }
    #loadScreen { display:flex; }
    pre { text-align:left; background:#222; padding:1em; border-radius:8px; max-height:80%; overflow-y:auto; width:90%; }
  </style>
</head>
<body>
  <div id="loadScreen" class="screen"><h1>Loading TOLD Cardâ€¦</h1></div>
  <div id="resultScreen" class="screen">
    <h2>Results</h2>
    <pre id="output"></pre>
  </div>
  <script>
    async function loadData() {
      try {
        // hardcode repo name so GH Pages finds it
        const url = "Toldviewer/data.json";
        console.log("Fetching:", url);
        const res = await fetch(url, {cache:"no-store"});
        const text = await res.text();
        console.log("Raw response:", text.slice(0,200));

        if (!res.ok) throw new Error("HTTP " + res.status);
        const data = JSON.parse(text);

        document.getElementById("loadScreen").style.display="none";
        document.getElementById("resultScreen").style.display="flex";
        document.getElementById("output").textContent = JSON.stringify(data,null,2);
      } catch (err) {
        alert("Error: " + err.message);
        console.error(err);
      }
    }
    loadData();
  </script>
</body>
</html>
